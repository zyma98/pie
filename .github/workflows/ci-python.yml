name: Python CI

on:
  push:
    branches: [main]
    paths:
      - 'pie/**'
      - 'client/python/**'
      - 'sdk/tools/bakery/**'
      - 'sdk/python/**'
      - 'tests/format/python-*.sh'
  pull_request:
    branches: [main]
    paths:
      - 'pie/**'
      - 'client/python/**'
      - 'sdk/tools/bakery/**'
      - 'sdk/python/**'
      - 'tests/format/python-*.sh'

permissions:
  contents: read

jobs:
  format:
    name: Format (black)
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v6

      - name: Install uv
        uses: astral-sh/setup-uv@v7
        with:
          enable-cache: true
          python-version: "3.12"

      - name: Run black format check
        run: ./tests/format/python-format.sh

  # typecheck:
  #   name: Type Check (pyright)
  #   runs-on: ubuntu-latest
  #   steps:
  #     - uses: actions/checkout@v6

  #     - name: Install uv
  #       uses: astral-sh/setup-uv@v7
  #       with:
  #         enable-cache: true
  #         python-version: "3.12"

  #     - name: Run pyright
  #       run: ./tests/format/python-typecheck.sh
